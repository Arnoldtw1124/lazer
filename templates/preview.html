{% extends 'base.html' %}

{% block title %}線上模擬 - LaserCraft{% endblock %}

{% block content %}
<section class="preview-section" style="padding: 100px 10%;">
    <div class="split-layout" style="display: grid; grid-template-columns: 1fr 1fr; gap: 4rem;">
        <div class="control-panel">
            <h2>模擬您的設計</h2>
            <p style="margin-bottom: 2rem; color: rgba(255,255,255,0.7);">上傳您的圖片，即時預覽雷雕效果。</p>

            <div class="upload-area"
                style="border: 2px dashed rgba(255,255,255,0.2); padding: 2rem; border-radius: 15px; text-align: center; margin-bottom: 2rem;">
                <input type="file" id="uploadInput" accept="image/*" style="display: none;">
                <label for="uploadInput" class="btn btn-primary" style="cursor: pointer;">選擇圖片</label>
                <p style="margin-top: 1rem; font-size: 0.9rem;">支援 JPG, PNG 格式</p>
            </div>

            <div class="settings">
                <label style="display: block; margin-bottom: 1rem;">雕刻深度 (模擬)</label>
                <input type="range" min="0" max="100" value="50" style="width: 100%;">
            </div>
        </div>

        <div class="preview-window"
            style="background: #2a2a30; border-radius: 15px; height: 500px; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative;">
            <p id="placeholder" style="color: rgba(255,255,255,0.3);">預覽區域</p>
            <img id="previewImage" src="" alt="Preview"
                style="max-width: 90%; max-height: 90%; display: none; filter: sepia(100%) contrast(150%);">
        </div>
    </div>
</section>

<script>
    const input = document.getElementById('uploadInput');
    const preview = document.getElementById('previewImage');
    const placeholder = document.getElementById('placeholder');

    input.addEventListener('change', function (e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                preview.src = e.target.result;
                preview.style.display = 'block';
                placeholder.style.display = 'none';
            }
            reader.readAsDataURL(file);
        }
    });
</script>
{% endblock %}